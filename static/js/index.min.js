var gmap="//maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&ie=UTF8&iwloc=A&output=embed&";function getParameterByName(b){var a=RegExp("[?&]"+b+"=([^&]*)").exec(window.location.search);return a&&decodeURIComponent(a[1].replace(/\+/g," "))}angular.module("freegeoip",[]).directive("btnSubmit",function(){return function(c,b,a){c.$watch(function(){return c.$eval(a.btnSubmit)},function(d){if(d){$(b).button("loading")}else{$(b).button("reset")}})}});freegeoip.$inject=["$scope","$http"];function freegeoip(a,b){a.geoip={};a.search=function(d,c){a.error=null;a.map=c;a.searching=true;b.get("json/"+(d||"")).success(function(f){a.q=d||f.ip;if(!f.metrocode){f.metrocode="-"}if(!f.areacode){f.areacode="-"}a.geoip=angular.copy(f);var e="";var g=2;if(f.country_name&&f.country_code!="RD"){if(f.region_name){if(f.city){g=6;e=f.city+","+f.region_name+","+f.country_name}else{g=4;e=f.region_name+","+f.country_name}}else{e=f.country_name}}else{e="Africa"}$("#map").attr("src",gmap+"z="+g+"&q="+e);a.searching=false}).error(function(f,e){a.errorq=d;a.error=e;a.searching=false;$("#map").attr("src",gmap+"zoom=2&q=africa")})};a.search(getParameterByName("q"),getParameterByName("map"))}$(document).ready(function(){$("#map").height($("#map").width()/2);$("#cb").tooltip();$("#cb").click(function(a){a.preventDefault()})});