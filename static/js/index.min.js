angular.module("freegeoip",[]).directive("btnSubmit",function(){return function(b,d,e){b.$watch(function(){return b.$eval(e.btnSubmit)},function(a){a?$(d).button("loading"):$(d).button("reset")})}});freegeoip.$inject=["$scope","$http"];
function freegeoip(b,d){b.geoip={};b.search=function(e){b.error=null;b.searching=!0;d.get("json/"+e).success(function(a){a.metrocode||(a.metrocode="-");a.areacode||(a.areacode="-");b.geoip=angular.copy(a);var c="",d=2;a.country_name&&"RD"!=a.country_code?a.region_name?a.city?(d=6,c=a.city+","+a.region_name+","+a.country_name):(d=4,c=a.region_name+","+a.country_name):0!=a.latitude&&0!=a.longitude?(c=(new Number(a.latitude)).toFixed(2),a=(new Number(a.longitude)).toFixed(2),c=c+" "+a):c=a.country_name:
c="Africa";$("#map").attr("src","http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&ie=UTF8&iwloc=A&output=embed&z="+d+"&q="+c);b.searching=!1}).error(function(a,c){b.errorq=e;b.error=c;b.searching=!1;$("#map").attr("src","http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&ie=UTF8&iwloc=A&output=embed&zoom=2&q=africa")})};b.search("")}$(document).ready(function(){$("#map").height($("#map").width()/2)});
